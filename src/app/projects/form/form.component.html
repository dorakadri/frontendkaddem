<div class="panel-header panel-header-sm"></div>
<div class="main-content">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h5 class="title">{{ action }} Project</h5>
        </div>
        <div class="card-body">
          <form [formGroup]="projectForm" (ngSubmit)="save()">
            <div class="row">
              <div class="col-md-5 pr-1">
                <div class="form-group">
                  <label>Project name</label>
                  <input
                    type="text"
                    class="form-control"
                    name="nomProjet"
                    [ngModel]="projet.nomProjet"
                    formControlName="nomProjet"
                    placeholder="Project name"
                  />
                  <small
                    *ngIf="
                      !projectForm.controls['nomProjet'].valid &&
                      projectForm.controls['nomProjet'].touched
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-exclamation-circle"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                      />
                      <path
                        d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"
                      />
                    </svg>
                    <span
                      *ngIf="
                        projectForm.controls['nomProjet'].hasError('required')
                      "
                    >
                      Required Field</span
                    >
                    <span
                      *ngIf="
                        projectForm.controls['nomProjet'].hasError('minlength')
                      "
                    >
                      min length is 3</span
                    >
                  </small>
                </div>
              </div>
              <div class="col-md-3 px-1">
                <div class="form-group">
                  <label>Client</label>
                  <input
                    type="text"
                    class="form-control"
                    name="client"
                    [ngModel]="projet.client"
                    formControlName="client"
                    placeholder="Client"
                  />
                  <small
                    *ngIf="
                      !projectForm.controls['client'].valid &&
                      projectForm.controls['client'].touched
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-exclamation-circle"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                      />
                      <path
                        d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"
                      />
                    </svg>
                    <span
                      *ngIf="
                        projectForm.controls['client'].hasError('required')
                      "
                    >
                      Required Field</span
                    >
                    <span
                      *ngIf="projectForm.controls['client'].hasError('pattern')"
                    >
                      only A-Z a-z are allowed</span
                    >
                  </small>
                </div>
              </div>
              <div class="col-md-4 pl-1">
                <div class="form-group">
                  <label>DeadLine</label>
                  <input
                    class="form-control date-picker"
                    name="deadline"
                    [ngModel]="projet.deadline"
                    formControlName="deadline"
                    type="date"
                  />
                  <small
                    *ngIf="
                      !projectForm.controls['deadline'].valid &&
                      projectForm.controls['deadline'].touched
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-exclamation-circle"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                      />
                      <path
                        d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"
                      />
                    </svg>
                    <span
                      *ngIf="
                        projectForm.controls['deadline'].hasError('required')
                      "
                    >
                      Required Field</span
                    >
                  </small>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 pr-1">
                <div class="form-group">
                  <label>Level Required</label>
                  <select
                    class="custom-select form-control"
                    (change)="getvalue($event)"
                    name="field"
                    [ngModel]="projet.field"
                    formControlName="field"
                  >
                    <option value="ANY">ANY</option>
                    <option value="JUNIOR">Junior</option>
                    <option value="SENIOR">Senior</option>
                    <option value="EXPERT">Expert</option>
                  </select>
                  <small
                    *ngIf="
                      !projectForm.controls['field'].valid &&
                      projectForm.controls['field'].touched
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-exclamation-circle"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                      />
                      <path
                        d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"
                      />
                    </svg>
                    <span
                      *ngIf="projectForm.controls['field'].hasError('required')"
                    >
                      Required Field</span
                    >
                  </small>
                </div>
              </div>
              <div class="col-md-4 pr-1" *ngIf="action === 'ADD'">
                <app-docstest [idprojectfordoc]="idtodoc"></app-docstest>
              </div>
              <div class="col-md-6 pr-5" *ngIf="action === 'Modify'">
                <label>Status</label>

                <div class="form-check form-check-radio">
                  <label class="form-check-label pr-5">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="exampleRadios"
                      id="exampleRadios1"
                      formControlName="etat"
                      [ngModel]="projet.etat"
                      value="DONE"
                    />
                    <span class="form-check-sign"></span>
                    Done
                  </label>

                  <label class="form-check-label pr-5">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="exampleRadios"
                      id="exampleRadios1"
                      formControlName="etat"
                      [ngModel]="projet.etat"
                      value="ANNULER"
                    />
                    <span class="form-check-sign"></span>
                    ANNULER
                  </label>

                  <label class="form-check-label">
                    <input
                      class="form-check-input"
                      formControlName="etat"
                      [ngModel]="projet.etat"
                      type="radio"
                      name="exampleRadios"
                      id="exampleRadios1"
                      value="ENCOUR"
                    />
                    <span class="form-check-sign"></span>
                    ENCOUR
                  </label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group">
                  <label>Description</label>
                  <textarea
                    rows="4"
                    cols="80"
                    class="form-control"
                    name="decription"
                    [ngModel]="projet.decription"
                    formControlName="decription"
                    placeholder="write your Description here "
                  ></textarea>
                  <small
                    *ngIf="
                      !projectForm.controls['decription'].valid &&
                      projectForm.controls['decription'].touched
                    "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-exclamation-circle"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"
                      />
                      <path
                        d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"
                      />
                    </svg>
                    <span
                      *ngIf="
                        projectForm.controls['decription'].hasError('required')
                      "
                    >
                      Required Field</span
                    >
                    <span
                      *ngIf="
                        projectForm.controls['decription'].hasError('minlength')
                      "
                      >min length is 10</span
                    >
                    <span
                      *ngIf="
                        projectForm.controls['decription'].hasError('maxlength')
                      "
                      >min length is 200</span
                    >
                  </small>
                </div>
              </div>
            </div>

            <div class="table-responsive">
              <table class="table align-middle mb-0 bg-white">
                <thead class="bg-light">
                  <th>select</th>
                  <th>ID</th>
                  <th>Team Name</th>
                  <th>Level</th>
                </thead>

                <tbody *ngFor="let l of selectedList">
                  <tr>
                    <td>
                      <div class="form-check">
                        <label class="form-check-label">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            [value]="l.idEquipe"
                            [checked]="idselected.includes(l.idEquipe)"
                            (change)="getid($event)"
                          />
                          <span class="form-check-sign"></span>
                        </label>
                      </div>
                    </td>
                    <td class="text-left">{{ l.idEquipe }}</td>
                    <td class="text-left">{{ l.nomEquipe }}</td>
                    <td class="text-left">{{ l.niv }}</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div>
              <button
                type="submit"
                [disabled]="projectForm.invalid"
                class="btn btn-primary btn-round btn-success"
              >
                <i
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-plus-lg"
                    viewBox="0 0 16 16"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"
                    /></svg
                ></i>
                {{ action }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
